{% extends 'frontend/baseHTML.html' %}
{% block title %}
Staff List
{% endblock %}
{% block extra_css %}
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 50px;
            padding-bottom: 50px; /* Adjust the value as needed */
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #f0f0f0;
            transition: background-color 0.2s;
        }

        .button:hover {
            background-color: #e0e0e0;
        }

        .button.primary {
            background-color: #007bff;
            color: white;
        }

        .button.primary:hover {
            background-color: #0056b3;
        }

        .button.danger {
            background-color: #dc3545;
            color: white;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            font-weight: bold;
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close {
            cursor: pointer;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        .dropdown {
      position: relative;
      display: inline-block;
      width: 20%;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      padding: 12px 16px;
      z-index: 1;
      right: 0;
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .dropdown button {
      color: white;
      padding: 12px 20px;
      border: none;
      cursor: pointer;
      width: 100%;
    }

    .dropdown button:hover {
      background-color: #3e8e41;
    }

    .dropdown label {
      display: block;
      margin-bottom: 8px;
      cursor: pointer;
    }

  .button_list {
    padding: 4px 12px;
    border-radius: 16px;
    border: none;
    font-size: 14px;
  }

  .heute {
    background-color: #e7f6ec;
    color: #16a34a;
  }

  .gestern {
    background-color: #fef9c3;
    color: #ca8a04;
  }
    </style>
{% endblock %}
<body>
<div class="container">
{% block content %}

    <div class="table-container">
        <table id="staffTable">
            <thead>
            <tr>
                <th>Name</th>
                <th>Letzter Eintrag</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody id="staffTableBody"></tbody>
        </table>
    </div>

    <div class="pagination">
        <span id="showing"></span>
        <div>
            <div class="dropdown">
                <button class="button">Columns</button>
                <div class="dropdown-content">
                    <label><input type="checkbox" checked onchange="toggleColumnVisibility(0)"> Name</label>
                    <label><input type="checkbox" checked onchange="toggleColumnVisibility(1)"> Age</label>
                </div>
            </div>
            <button class="button" onclick="previousPage()" id="prevButton">Previous</button>
            <button class="button" onclick="nextPage()" id="nextButton">Next</button>
        </div>
    </div>
</div>

<div id="addStaffModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add Staff Member</h2>
            <span class="close" onclick="closeModal()">&times;</span>
        </div>
        <form id="staffForm" onsubmit="addStaffMember(event)">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="last">Letzter Eintrag</label>
                <input type="text" id="last" required>
            </div>
            <div class="modal-footer">
                <button type="button" class="button" onclick="closeModal()">Cancel</button>
                <button type="submit" class="button primary">Save</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
<!--    let staffList = [-->
<!--        { id: "EMP001", name: "John", surname: "Doe", age: 32, station: "Station A", status: "Active" },-->
<!--        { id: "EMP002", name: "Jane", surname: "Smith", age: 28, station: "Station B", status: "Active" },-->
<!--        { id: "EMP003", name: "Mike", surname: "Johnson", age: 45, station: "Station A", status: "On Leave" },-->
<!--        { id: "EMP004", name: "Sarah", surname: "Wilson", age: 36, station: "Station C", status: "Active" },-->
<!--        { id: "EMP005", name: "Robert", surname: "Brown", age: 41, station: "Station B", status: "Inactive" }-->
<!--    ];-->

    let staffList = [
        { id: "EMP001", name: "John", last: "today" },
        { id: "EMP002", name: "Jane", last: "today" },
        { id: "EMP003", name: "Mike", last: "yesterday" },
        { id: "EMP004", name: "Sarah", last: "today" },
        { id: "EMP005", name: "Robert", last: "today" }
    ];

    let currentPage = 1;
    const itemsPerPage = 5;

    function renderTable() {
        const tableBody = document.getElementById('staffTableBody');
        tableBody.innerHTML = '';

        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const currentItems = staffList.slice(startIndex, endIndex);

        currentItems.forEach(staff => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${staff.name}</td>
                <td>
                    <button class="button ${staff.last === 'today' ? 'heute' : 'gestern'}">
                     ${staff.last === 'today' ? 'Heute' : 'Gestern'}
                    </button>
                </td>
                <td>
                    <button class="button" onclick="editStaff('${staff.id}')">Edit</button>
                    <button class="button danger" onclick="deleteStaff('${staff.id}')">Delete</button>
                </td>
            `;
            tableBody.appendChild(row);
        });

        updatePaginationInfo();
    }

    function updatePaginationInfo() {
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, staffList.length);
        document.getElementById('showing').textContent =
            `Showing ${startIndex + 1}-${endIndex} of ${staffList.length} items`;

        document.getElementById('prevButton').disabled = currentPage === 1;
        document.getElementById('nextButton').disabled = endIndex >= staffList.length;
    }

    function previousPage() {
        if (currentPage > 1) {
            currentPage--;
            renderTable();
        }
    }

    function nextPage() {
        const maxPage = Math.ceil(staffList.length / itemsPerPage);
        if (currentPage < maxPage) {
            currentPage++;
            renderTable();
        }
    }

    function openModal() {
        document.getElementById('addStaffModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('addStaffModal').style.display = 'none';
        document.getElementById('staffForm').reset();
    }

    function addStaffMember(event) {
        event.preventDefault();
        const newStaff = {
            name: document.getElementById('name').value,
            last: document.getElementById('last').value,
        };

        staffList.push(newStaff);
        renderTable();
        closeModal();
    }

    function deleteStaff(id) {
        if (confirm('Are you sure you want to delete this staff member?')) {
            staffList = staffList.filter(staff => staff.id !== id);
            renderTable();
        }
    }

    function editStaff(id) {
    // Irgendwas machen
        alert('Edit functionality can be implemented here');
    }
    renderTable();
    function toggleColumnVisibility(columnIndex) {
      const table = document.getElementById('staffTableBody');
      const rows = table.getElementsByTagName('tr');

      for (let i = 0; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName('td');
        cells[columnIndex].style.display = cells[columnIndex].style.display === 'none' ? 'table-cell' : 'none';
      }
    }
</script>
{% endblock %}
</body>
</html>